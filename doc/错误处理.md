# 错误处理

首先，在devcpp中触发这些错误，找到对应缩写，对应上字母的编号，这样能够增加可读性，扩展也方便。

有几个问题：

+ 如何处理{}作用域
+ 同名变量作用域判定
+ int a = b + c * d / e 如何处理，如何生成中间代码
+ 函数参数个数
+ const int a = 1; const int a = b;如何处理

建立了两张表

`global_table`放和全局相关的东西，

如函数和const和全局的int变量

通过一个func_name索引到对应的func_table

func_table放函数中的变量，包括

函数参数，函数中的变量

```csv
global_table
--
name -> data_type symbol_type value dim0_size dim1_size addr
add		int			func		

func_table

int
--
data_type symbol_type name value dim0_size dim1_size level visible addr
int 		var			a   1     0    0    0     true

```

## AddSymbol

```cpp
bool SymbolTable::AddSymbol(const std::string &func_name, DataType data_type, SymbolType symbol_type, const std::string &name, int value, int level, int dim0_size, int dim1_size)
```

```
global_table
  |- const
  |- var
  |- func

func_table
  |- param
  |- var
```

可能错误：

函数调用里套void型函数/











